<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questions Inside Card Pack by Sir Sam</title>
    <style>
        /* General body styling */
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background-color: #2d3436;
            /* Dark background for a mysterious vibe */
            color: white;
            margin: 0;
            padding: 20px;
            background-image: url('https://www.transparenttextures.com/patterns/black-linen.png');
            /* Subtle linen texture */
            background-size: cover;
        }

        h1 {
            color: #f39c12;
            font-size: 2.5em;
            text-shadow: 0px 0px 15px rgba(255, 255, 255, 0.8);
        }

        #output {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            color: #f39c12;
        }

        /* Card pack container */
        .card-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        /* Individual card pack */
        .card {
            width: 150px;
            height: 200px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background: linear-gradient(145deg, #f7d84b, #f7c600);
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2), inset 0px 0px 15px rgba(255, 255, 255, 0.3);
            position: relative;
        }

        .card:hover {
            transform: scale(1.05);
            box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3), inset 0px 0px 20px rgba(255, 255, 255, 0.4);
        }

        /* Color-specific card backgrounds */
        #card1 {
            background: linear-gradient(145deg, #f7d84b, #f7c600);
            /* Yellow gradient */
        }

        #card2 {
            background: linear-gradient(145deg, #ff7f50, #ff4500);
            /* Orange gradient */
        }

        #card3 {
            background: linear-gradient(145deg, #9b59b6, #8e44ad);
            /* Purple gradient */
        }

        /* Modal */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            z-index: 1;
            /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            /* Dark background for modal */
            animation: fadeIn 0.5s ease-out;
        }

        /* Modal content */
        .modal-content {
            background-color: #2c3e50;
            padding: 20px;
            margin: 15% auto;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.5s ease-out;
        }

        /* Fade-in effect for the modal background */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Slide-up effect for the modal content */
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Close button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }

        /* Modal text for the random names display */
        #modalOutput {
            font-size: 1.5em;
            font-weight: bold;
            color: #f39c12;
            /* Gold-colored text */
            text-shadow: 0px 0px 15px rgba(255, 255, 255, 0.8);
            opacity: 0;
            /* Start as invisible */
            transition: opacity 1s ease-in-out;
            /* Fade-in animation */
        }
    </style>
</head>

<body>
    <h1>Pick a Card Pack</h1>

    <!-- Card pack container -->
    <div class="card-container">
        <div class="card" id="card1">
            <span>Pikachu</span>
        </div>
        <div class="card" id="card2">
            <span>Charizard</span>
        </div>
        <div class="card" id="card3">
            <span>Mewtwo</span>
        </div>
    </div>

    <!-- Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Your question is:</h2>
            <p id="modalOutput">Waiting for a random question...</p>
        </div>
    </div>

    <script>
        // Weights for each file
        const fileWeights = {
            'pack1.txt': [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.01], // Weights for file1.txt 1 = 100%, 0.1 = 10%
            'pack2.txt': [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.01], // Weights for file2.txt
            'pack3.txt': [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.01] // Weights for file3.txt
        };

        // Function to fetch the file and display a random line from it
        function fetchAndDisplayFile(fileName) {
            fetch(fileName)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(data => {
                    const lines = data.split('\n').filter(line => line.trim() !== ''); // Split file content and remove empty lines

                    // Use predefined weights for the specific file
                    const weights = fileWeights[fileName];

                    // Check if weights match the number of lines
                    if (weights && weights.length === lines.length) {
                        const randomIndex = getWeightedRandomIndex(weights);
                        const randomLine = lines[randomIndex];

                        // Display the selected line
                        const modalOutput = document.getElementById('modalOutput');
                        modalOutput.textContent = randomLine;

                        // Show the result with a fade-in effect
                        modalOutput.style.opacity = 0; // Reset opacity
                        setTimeout(() => {
                            modalOutput.style.opacity = 1; // Trigger fade-in effect
                        }, 200); // Short delay before fade-in
                    } else {
                        document.getElementById('modalOutput').textContent = `Error: Mismatched weights and lines in ${fileName}`;
                    }

                    openModal(); // Open the popup modal
                })
                .catch(error => {
                    console.error('Error fetching the file:', error);
                    document.getElementById('modalOutput').textContent = `Error loading ${fileName}!`;
                    openModal(); // Open the popup modal on error
                });
        }

        // Open the modal
        function openModal() {
            const modal = document.getElementById("myModal");
            modal.style.display = "block";
        }

        // Close the modal when the user clicks on the 'x'
        document.getElementsByClassName("close")[0].onclick = function () {
            const modal = document.getElementById("myModal");
            modal.style.display = "none";
        };

        // Close the modal if the user clicks outside the modal content
        window.onclick = function (event) {
            const modal = document.getElementById("myModal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        };

        // Helper function to get a weighted random index
        function getWeightedRandomIndex(weights) {
            const cumulativeWeights = [];
            weights.reduce((sum, weight, index) => {
                cumulativeWeights[index] = sum + weight;
                return cumulativeWeights[index];
            }, 0);
            const random = Math.random() * cumulativeWeights[cumulativeWeights.length - 1];
            return cumulativeWeights.findIndex(cumulativeWeight => random < cumulativeWeight);
        }

        // Attach event listeners to each card with corresponding file
        document.getElementById('card1').addEventListener('click', () => {
            fetchAndDisplayFile('pack1.txt');
        });
        document.getElementById('card2').addEventListener('click', () => {
            fetchAndDisplayFile('pack2.txt');
        });
        document.getElementById('card3').addEventListener('click', () => {
            fetchAndDisplayFile('pack3.txt');
        });

    </script>
</body>

</html>